Проект состоит из нескольких сервисов, упакованных в docker-compose. 
Чтобы развернуть его локально, необходимо склонировать репозиторий и запустить docker-compose
```bash
git clone https://github.com/buc-a/o11y
cd o11y
docker compose up
```
**Основной сервис - Python-бэкенд FastAPI.** Временно доступен по адресу http://158.160.45.39:8000. Предназначен для ведения журнала успеваемости студентов. Имеет ручки для добавления/просмотра студентов, их оценок и предметов. Документация представлена по адресу  http://158.160.45.39:8000/docs. Для того, чтобы приложение отдавало метрики использовалась библиотека *prometheus_fastapi_instrumentator*

**База данных - PostgreSQL.** Для того, чтобы можно было получать метрики от базы, использовался дополнительный сервис - **postgres-exporter**. Метрики доступны по адресу  http://158.160.45.39:9187/metrics. 

**Сбор метрик - Prometheus**. 

**Нагрузка сервисов - Locust**. Доступен по адресу http://158.160.45.39:8089. Нагрузка здесь регулируется кол-вом пользователей, отправляющих запросы. Для удобства в его коде указано, что "тестовый" пользователь будет отсылать новый запрос через секунду после получения ответа от сервера. Поэтому при хорошем соединении кол-во пользователей примерно равно  RPS. Реальные RPS и задержки ответов видны в графическом интерфейсе Locust. 
Для упрощения использовалась нагрузка только на одну ручку сервиса - GET /students/, выполняющую SELECT запрос в БД
<img width="1742" height="801" alt="image" src="https://github.com/user-attachments/assets/a80397cf-5bfa-41f7-b6a4-6411f32c75ec" />

**Графическое отображение и алерты - Grafana**. Доступно по адресу http://158.160.45.39:3000 логин: admin, пароль: admin_pass. Здесь есть 2 дашборда: для базы данных и сервиса, а также 2 правила для уведомления: когда задержка более 0.5 секунд на 99 перцентиле и когда RPS превышает 100. Файлы конфигураций лежат для дашбордов, алертов, источника данных (prometheus) и телеграм-бота расположены в директории grafana в соответствующих под-директориях. 

Дашборд базы данных: сведения о транзациях, типах операций, использовании памяти и процессора, константных значений в конфигурации кластера
<img width="1561" height="479" alt="image" src="https://github.com/user-attachments/assets/83fd943e-23ce-414f-a2b6-d2c0c563862e" />
<img width="1561" height="827" alt="image" src="https://github.com/user-attachments/assets/f32fd1d4-30d8-4d98-b71b-1f123c4c0c5e" />



Дашборд основного сервиса: медианное значение времени обработки запроса, 99 перцентиль, RPS
<img width="815" height="821" alt="image" src="https://github.com/user-attachments/assets/c1cc38aa-d217-4463-ae0e-f6790465fc03" />


Чтобы получить уведомления в канал, можно в Locust указать 200 пользователь, скорость их роста не важна.
